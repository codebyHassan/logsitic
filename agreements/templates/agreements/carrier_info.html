{% extends "agreements/base.html" %}
{% block title %}Carrier Info{% endblock %}
{% block content %}

<div class="stepper-wrapper">
  <div class="stepper-item active"><div class="step-counter">1</div><small>Carrier Info</small></div>
  <div class="stepper-item"><div class="step-counter">2</div><small>Conditions</small></div>
  <div class="stepper-item"><div class="step-counter">3</div><small>Sign Agreement</small></div>
  <div class="stepper-item"><div class="step-counter">4</div><small>Preview</small></div>
  <div class="stepper-item"><div class="step-counter">5</div><small>Done</small></div>
</div>

<div class="agreement-card">
  <h3 class="text-center mb-2 fw-bold animated-title">Broker/Carrier Agreement</h3>
  <p class="text-center text-muted mb-4 animated-subtitle">Please enter your carrier and banking information below.</p>

  <div class="blue-header">
    <span class="header-text">Broker Information</span>
  </div>
  <div class="p-3 border border-top-0 rounded-bottom info-section">
    <table class="w-100 info-table">
      <tr class="table-row">
        <td><b>Broker Name:</b> WIDE RANGE LOGISTICS LLC.</td>
        <td><b>USDOT Number:</b> USDOT# 2581295 </td>
      </tr>
      <tr class="table-row">
        <td><b>MC Number:</b> MC# 900028</td>
        <td><b>Email:</b> <a href="mailto:chris@northernstarlogisticsinc.com">chris@northernstarlogisticsinc.com</a></td>
      </tr>
      <tr class="table-row">
        <td colspan="2"><b>Address:</b> 419 INTERLUDE RD NEW IBERIA, LA 70563 </td>
      </tr>
    </table>
  </div>

  <form method="post" class="mt-4 animated-form">
    {% csrf_token %}
    <h5 class="fw-bold mb-3 section-title">
      <span class="title-icon">üìã</span> Carrier Information
    </h5>
    <div class="row">
      <div class="col-md-6 mb-3 form-field">
        <h7>Carrier Name</h7>
        {{ carrier_form.carrier_name }}
        {% for error in carrier_form.carrier_name.errors %}
          <div class="text-danger small error-message">{{ error }}</div>
        {% endfor %}
      </div>

      <div class="col-md-6 mb-3 form-field">
        <h7>USDOT/MC Number:</h7>
        {{ carrier_form.carrier_usdot_number }}
        {% for error in carrier_form.carrier_usdot_number.errors %}
          <div class="text-danger small error-message">{{ error }}</div>
        {% endfor %}
      </div>

      <div class="col-md-6 mb-3 form-field">
        <h7>Contact Number:</h7>
        {{ carrier_form.carrier_phone }}
        {% for error in carrier_form.carrier_phone.errors %}
          <div class="text-danger small error-message">{{ error }}</div>
        {% endfor %}
      </div>

      <div class="col-md-6 mb-3 form-field">
        {{ carrier_form.agreement_date.label_tag }}
        {{ carrier_form.agreement_date }}
        {% for error in carrier_form.agreement_date.errors %}
          <div class="text-danger small error-message">{{ error }}</div>
        {% endfor %}
      </div>
    </div>

    <hr class="my-4 divider-line">
    
    <h5 class="fw-bold mb-3 section-title">
      <span class="title-icon" >üè¶</span> Banking Information
    </h5>
    <div class="row">
      <div class="col-md-6 mb-3 form-field">
        {{ banking_form.bank_name.label_tag }}
        {{ banking_form.bank_name }}
        {% for error in banking_form.bank_name.errors %}
          <div class="text-danger small error-message">{{ error }}</div>
        {% endfor %}
      </div>

      <div class="col-md-6 mb-3 form-field">
        {{ banking_form.account_number.label_tag }}
        {{ banking_form.account_number }}
        {% for error in banking_form.account_number.errors %}
          <div class="text-danger small error-message">{{ error }}</div>
        {% endfor %}
      </div>

      <div class="col-md-6 mb-3 form-field">
        {{ banking_form.account_type.label_tag }}
        {{ banking_form.account_type }}
        {% for error in banking_form.account_type.errors %}
          <div class="text-danger small error-message">{{ error }}</div>
        {% endfor %}
      </div>
    </div>

    <button class="btn btn-primary w-100 mt-3 submit-btn">
      <span class="btn-text">Next</span>
      <span class="btn-icon">‚Üí</span>
    </button>
  </form>
</div>

<style>
  /* Base Animations */
  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
  }

  @keyframes shimmer {
    0% {
      left: -100%;
    }
    100% {
      left: 100%;
    }
  }

  @keyframes gradientFlow {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  @keyframes borderGlow {
    0%, 100% {
      box-shadow: 0 0 5px rgba(11, 55, 96, 0.3);
    }
    50% {
      box-shadow: 0 0 20px rgba(11, 55, 96, 0.6);
    }
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  @keyframes expandWidth {
    from {
      width: 0;
    }
    to {
      width: 100%;
    }
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
  }

  /* Stepper Animations */
  .stepper-wrapper {
    animation: fadeInDown 0.6s ease-out;
  }

  .stepper-item {
    animation: scaleIn 0.5s ease-out backwards;
  }

  .stepper-item:nth-child(1) { animation-delay: 0.1s; }
  .stepper-item:nth-child(2) { animation-delay: 0.2s; }
  .stepper-item:nth-child(3) { animation-delay: 0.3s; }
  .stepper-item:nth-child(4) { animation-delay: 0.4s; }
  .stepper-item:nth-child(5) { animation-delay: 0.5s; }

  .stepper-item.active .step-counter {
    background: linear-gradient(135deg, #0b3760, #144b82);
    animation: pulse 2s ease-in-out infinite, borderGlow 2s ease-in-out infinite;
  }

  .stepper-item.active::after {
    background: linear-gradient(90deg, #0b3760, #144b82);
    animation: expandWidth 1s ease-out;
  }

  /* Card Animations */
  .agreement-card {
    animation: scaleIn 0.8s ease-out 0.3s backwards;
    position: relative;
    overflow: hidden;
  }

  .agreement-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    animation: shimmer 3s infinite;
    pointer-events: none;
  }

  /* Title Animations */
  .animated-title {
    animation: slideInLeft 0.6s ease-out 0.5s backwards;
  }

  .animated-subtitle {
    animation: slideInRight 0.6s ease-out 0.6s backwards;
  }

  /* Blue Header Animation */
  .blue-header {
    background: linear-gradient(90deg, #0b3760, #144b82, #0b3760);
    background-size: 200% 100%;
    animation: gradientFlow 3s ease infinite, fadeInDown 0.6s ease-out 0.7s backwards;
    position: relative;
    overflow: hidden;
  }

  .blue-header::after {
    content: '';
    position: absolute;
    top: 0;
    right: -100px;
    width: 100px;
    height: 100%;
    background: rgba(255, 255, 255, 0.1);
    transform: skewX(-20deg);
    animation: shimmer 2s ease-in-out infinite;
  }

  .header-text {
    position: relative;
    z-index: 1;
  }

  /* Info Section Animation */
  .info-section {
    animation: fadeInUp 0.6s ease-out 0.8s backwards;
  }

  .table-row {
    opacity: 0;
    animation: fadeInUp 0.5s ease-out forwards;
  }

  .table-row:nth-child(1) { animation-delay: 0.9s; }
  .table-row:nth-child(2) { animation-delay: 1s; }
  .table-row:nth-child(3) { animation-delay: 1.1s; }

  .info-table a {
    color: #0b3760;
    text-decoration: none;
    position: relative;
    transition: color 0.3s ease;
  }

  .info-table a::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, #0b3760, #144b82);
    transition: width 0.4s ease;
  }

  .info-table a:hover {
    color: #144b82;
  }

  .info-table a:hover::after {
    width: 100%;
  }

  /* Form Animations */
  .animated-form {
    animation: fadeInUp 0.6s ease-out 1.2s backwards;
  }

  .section-title {
    animation: slideInLeft 0.5s ease-out backwards;
    position: relative;
    padding-left: 40px;
  }

  .section-title:nth-of-type(1) { animation-delay: 1.3s; }
  .section-title:nth-of-type(2) { animation-delay: 1.4s; }

  .title-icon {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    font-size: 24px;
    animation: float 2s ease-in-out infinite;
  }

/* .section-title::before {
    content: '';
    position: relative;
    left: 250px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 3px;
    background: linear-gradient(90deg, #0b3760, transparent);
    animation: expandWidth 0.8s ease-out forwards;
    margin: auto;
  }  */

  /* Form Field Animations */
  .form-field {
    opacity: 0;
    animation: fadeInUp 0.5s ease-out forwards;
  }

  .form-field:nth-child(1) { animation-delay: 1.4s; }
  .form-field:nth-child(2) { animation-delay: 1.5s; }
  .form-field:nth-child(3) { animation-delay: 1.6s; }
  .form-field:nth-child(4) { animation-delay: 1.7s; }

  .form-field input,
  .form-field select {
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .form-field input:focus,
  .form-field select:focus {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(11, 55, 96, 0.2);
    border-color: #0b3760;
  }

  .form-field input:hover,
  .form-field select:hover {
    border-color: #144b82;
    transform: translateY(-2px);
  }

  /* Divider Animation */
  .divider-line {
    position: relative;
    border: none;
    height: 2px;
    background: linear-gradient(90deg, transparent, #0b3760, transparent);
    animation: expandWidth 1s ease-out 1.8s backwards;
  }

  .divider-line::after {
    content: '‚óÜ';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 0 10px;
    color: #0b3760;
    animation: pulse 2s ease-in-out infinite;
  }

  /* Button Animation */
  .submit-btn {
    background: linear-gradient(90deg, #0b3760, #144b82);
    border: none;
    position: relative;
    overflow: hidden;
    transition: all 0.4s ease;
    animation: fadeInUp 0.6s ease-out 1.9s backwards;
  }

  .submit-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
  }

  .submit-btn:hover::before {
    width: 400px;
    height: 400px;
  }

  .submit-btn:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(11, 55, 96, 0.5);
    background: linear-gradient(90deg, #144b82, #0b3760);
  }

  .submit-btn:active {
    transform: translateY(-2px);
  }

  .btn-text,
  .btn-icon {
    position: relative;
    z-index: 1;
  }

  .btn-icon {
    display: inline-block;
    margin-left: 8px;
    transition: transform 0.3s ease;
  }

  .submit-btn:hover .btn-icon {
    transform: translateX(5px);
  }

  /* Error Animation */
  .error-message {
    animation: shake 0.5s ease;
  }

  .text-danger.small { 
    font-size: 0.875rem; 
    margin-top: 4px;
  }

  input.is-invalid, 
  select.is-invalid { 
    border-color: #dc3545 !important;
    animation: shake 0.5s ease;
  }

  /* Loading State Animation (for form submission) */
  .submit-btn.loading {
    pointer-events: none;
    opacity: 0.7;
  }

  .submit-btn.loading::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    border: 3px solid white;
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
  }

  @keyframes spin {
    to { transform: translateY(-50%) rotate(360deg); }
  }

  /* Responsive Animations */
  @media (max-width: 768px) {
    .animated-title,
    .animated-subtitle,
    .section-title {
      animation-duration: 0.4s;
    }

    .form-field {
      animation-duration: 0.3s;
    }
  }

  /* Hover Effects for Interactive Elements */
  .stepper-item:not(.active):hover .step-counter {
    transform: scale(1.1);
    transition: transform 0.3s ease;
  }

  h7 {
    transition: color 0.3s ease;
  }

  .form-field:hover h7 {
    color: #0b3760;
  }
</style>

<script>
  // Add loading state to button on form submit
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    const submitBtn = document.querySelector('.submit-btn');
    
    if (form && submitBtn) {
      form.addEventListener('submit', function() {
        submitBtn.classList.add('loading');
        submitBtn.querySelector('.btn-text').textContent = 'Processing...';
      });
    }

    // Add focus animation to form fields
    const inputs = document.querySelectorAll('input, select');
    inputs.forEach(input => {
      input.addEventListener('focus', function() {
        this.parentElement.style.transform = 'scale(1.02)';
        this.parentElement.style.transition = 'transform 0.3s ease';
      });
      
      input.addEventListener('blur', function() {
        this.parentElement.style.transform = 'scale(1)';
      });
    });

    // Smooth scroll to first error if any
    const firstError = document.querySelector('.error-message');
    if (firstError) {
      firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  });
</script>

{% endblock %}